<html>
<head>
  <meta charset='utf8'>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Age of Craft ランダマイザー</title>
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <link rel="stylesheet" href="./style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src='./age-of-craft-randmizer.min.js'></script>
  </style>
</head>
<body>
  <h1>Age of Craft ランダマイザー</h1>
  <div id="age-of-craft-random-result"></div>
  <div><p>※基本カードセットからのみ</p></div>
  <hr>
  <div id="controller">
    <button id="randmizer" class="pure-button pure-button-primary">生成</button>
    <h2>検索オプション</h2>
    <div>
      <ul>
      <li><label><input type='radio' name="mode" value="random" checked></input>
          <span class='pure-button'>標準ランダム</span>各系統のカードから数種類ずつチョイス</label>
      <li><label><input type='radio' name="mode" value="firstPlay">
          </input><span class='pure-button'>初回推奨カード</span></label>
      <li><label><input type='radio' name="mode" value="chaos"></input>
          <span class='pure-button'>完全ランダム</span></label>
      <ul>
    </div>
    <h2>拡張ルールの使用</h2>
    <div>
      <ul>
      <li><label><input type='checkbox' name="extend_1" id="extend_1"></input>
          <span class='pure-button'>#1 設計と来訪</span>「迎賓館」を抜き「社交界」「建築家ギルド」追加</label>
      </ul>
  </div>
  <section class="notice">
    <p>『Age of Craft』は<a href="http://cd.kyovo.org/">サークル ChickenDiceGames (http://cd.kyovo.org/)</a>さんが発売しているボードゲームです。</p>
    <p><a href="https://github.com/umanoda/age-of-craft-randomizer">Sorce Code - Github</a></p>
  </section>

  <script>
    (function(){
      var getRondomize = function(){
        var aocr = new AgeOfCraft();
        var $setResult = $('<div></div>');

        //mode
        aocr.setRule({ name: $("input[name='mode']:checked").val() || "random"});
        if($("#extend_1:checked").size() > 0){
          aocr.setRule({extend_1: true});
        }

        $.each(aocr.randmizer(), function(_idx, data){
          var sdata = data.split(':');
          $setResult.append($("<span class='type" + sdata[0] + "'>"+ data +"</span>"));
        });

        // 結果を描画  
        $("#age-of-craft-random-result").html($setResult);
      };
      $(getRondomize);
      $("#randmizer").on('click', getRondomize);
      $("input[name='mode']").on('change', getRondomize);
    }).call(self)
  </script>
</body>
</html>
